import ws from 'ws';
import { ILockServiceOptions } from '../../common';
import { GuildRequestMembers } from '../../types';
import { GatewayOptions, SessionLimitData } from './types';
export default class Gateway {
    private api?;
    private mainIdentifyLock?;
    private identifyLocks;
    online: boolean;
    private ws?;
    private wsUrl?;
    private wsUrlRetryWait;
    private wsRateLimitCache;
    private sequence?;
    private sessionId?;
    private heartbeatAck;
    private lastHeartbeatTimestamp?;
    private nextHeartbeatTimestamp?;
    private heartbeatTimeout?;
    private heartbeatIntervalTime?;
    private emitter;
    private events?;
    private identity;
    private keepCase;
    lastKnownSessionLimitData?: SessionLimitData;
    private static validateLockOptions;
    constructor(token: string, options?: Partial<GatewayOptions>);
    get resumable(): boolean;
    private get shard();
    get id(): number;
    private get connected();
    private bindTimerFunctions;
    private log;
    private emit;
    addIdentifyLockServices(mainServerOptions: null | Partial<ILockServiceOptions>, ...serverOptions: Partial<ILockServiceOptions>[]): void;
    private configureLockService;
    requestGuildMembers(guildId: string, options?: Partial<GuildRequestMembers>): boolean;
    private checkLocksPromise;
    private loginWaitForLocks;
    login(_websocket?: typeof ws): Promise<void>;
    releaseIdentifyLocks(): Promise<void>;
    private getWebsocketUrl;
    private handleBadStatus;
    private assignWebsocketMethods;
    private handleEvent;
    private _onopen;
    private _onerror;
    private _onclose;
    private handleCloseCode;
    private clearSession;
    private clearHeartbeat;
    private _onmessage;
    private handleMessage;
    private handleReady;
    private handleResumed;
    private handleHello;
    private startHeartbeat;
    private heartbeat;
    private handleHeartbeatAck;
    private connect;
    private resume;
    private identify;
    private acquireLocks;
    private acquireIdentifyLocks;
    private acquireIdentifyLock;
    private releaseIdentifyLock;
    private send;
    private canSendPacket;
    private updateWsRateLimit;
    private handleInvalidSession;
    private updateSequence;
}
