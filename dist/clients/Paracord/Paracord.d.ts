/// <reference types="node" />
import { EventEmitter } from 'events';
import { DebugLevel, ILockServiceOptions, UserEvents } from '../../common';
import { RemoteApiResponse } from '../../rpc/types';
import { EventFunctions, GuildMap, GuildMember, Message, PresenceMap, RawGuild, RawGuildMember, RawPresence, RawUser, ReadyEventFields, Snowflake, User, UserMap } from '../../types';
import Api from '../Api/Api';
import { IApiOptions, IApiResponse } from '../Api/types';
import Gateway from '../Gateway/Gateway';
import { GatewayOptions } from '../Gateway/types';
import Guild from './structures/Guild';
import { GatewayMap, ParacordLoginOptions, ParacordOptions } from './types';
export default class Paracord extends EventEmitter {
    token: string;
    initialized: boolean;
    user: User;
    unavailableGuildTolerance?: number;
    unavailableGuildWait?: number;
    startWithUnavailableGuildsInterval?: NodeJS.Timer;
    api: Api;
    gateways: GatewayMap;
    gatewayLoginQueue: Gateway[];
    gatewayLockServiceOptions?: {
        mainServerOptions: ILockServiceOptions;
        serverOptions: ILockServiceOptions[];
    };
    apiOptions: Partial<IApiOptions>;
    gatewayOptions: Partial<GatewayOptions>;
    safeGatewayIdentifyTimestamp?: number;
    gatewayWaitCount?: number;
    startingGateway: Gateway | undefined;
    guildWaitCount?: number;
    lastGuildTimestamp?: number;
    guilds: GuildMap;
    users: UserMap;
    presences: PresenceMap;
    processGatewayQueueInterval?: NodeJS.Timer;
    sweepCachesInterval?: NodeJS.Timer;
    sweepRecentPresenceUpdatesInterval?: NodeJS.Timer;
    events?: UserEvents;
    allowEventsDuringStartup: boolean;
    preventLogin: boolean;
    request: Api['request'];
    addRateLimitService: Api['addRateLimitService'];
    addRequestService: Api['addRequestService'];
    gatewayEvents: EventFunctions;
    private static validateParams;
    constructor(token: string, options?: ParacordOptions);
    get shards(): GatewayMap;
    get connecting(): boolean;
    private bindEventFunctions;
    private bindTimerFunction;
    eventHandler(eventType: string, data: unknown, shard: number): unknown;
    log(level: DebugLevel, message: string, data?: unknown): void;
    emit(event: string, ...args: unknown[]): boolean;
    login(options?: ParacordLoginOptions): Promise<void>;
    private startGatewayLoginInterval;
    processGatewayQueue(): Promise<void>;
    private startWithUnavailableGuilds;
    private enqueueGateways;
    private computeShards;
    private addNewGateway;
    init(): void;
    startSweepInterval(): void;
    private setUpApi;
    private setUpGateway;
    private selfAssignHandlerFunctions;
    addIdentifyLockServices(mainServerOptions: ILockServiceOptions, ...serverOptions: ILockServiceOptions[]): void;
    handleReady(data: ReadyEventFields, shard: number): void;
    private checkIfDoneStarting;
    private completeShardStartup;
    clearStartingShardState(): void;
    private completeStartup;
    upsertGuild(data: RawGuild, shard?: number, GuildConstructor?: typeof Guild): Guild | undefined;
    upsertUser(user: User | RawUser): User;
    updatePresences(presence: RawPresence): RawPresence;
    private upsertPresence;
    private circularAssignCachedPresence;
    private circularAssignCachedUser;
    private deletePresence;
    handlePresence({ guild, presence }: {
        guild?: Guild;
        presence: RawPresence;
    }): RawPresence;
    cacheMemberFromEvent(guild: Guild, member: GuildMember | RawGuildMember): GuildMember;
    private sweepCaches;
    static uqSnowflakes(...args: (Map<string, unknown> | string)[]): string[];
    static deDupe(a: Array<Snowflake>): Map<Snowflake, undefined>;
    private static trimMembersFromDeleteList;
    private clearUserFromCaches;
    sendMessage(channelId: Snowflake, message: string | Record<string, unknown> | Message): Promise<IApiResponse | RemoteApiResponse>;
    editMessage(message: Record<string, unknown> | Message, newMessage: string | Record<string, unknown> | Message): Promise<IApiResponse | RemoteApiResponse>;
    fetchMember(guild: Snowflake | Guild, memberId: Snowflake): Promise<IApiResponse | RemoteApiResponse>;
    fetchUser(userId: Snowflake): Promise<IApiResponse | RemoteApiResponse>;
}
